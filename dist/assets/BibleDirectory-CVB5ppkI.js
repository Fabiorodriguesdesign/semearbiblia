const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BibleView-DAfY_75F.js","assets/index-bFsWClXM.js","assets/BibleBookView-D9cf-SSl.js","assets/readingPlans-CgAFVali.js","assets/ApocryphaView-D52N5eXL.js","assets/ArchaeologyView-D-Ob5X04.js","assets/ThematicView-CGoLeKKv.js","assets/HarmonyView-BW1YGM5U.js"])))=>i.map(i=>d[i]);
import{a as N,R as O,u as M,r as n,b as X,j as e,B as Y,t as r,c as V,d as Q,e as q,f as K,h as U,i as F,k as $,_ as A}from"./index-bFsWClXM.js";import{g as G,d as I}from"./readingPlans-CgAFVali.js";const J=(o,t)=>{if(o.includes("toda a carta"))return null;const x=o.trim().toLowerCase().replace(/\s+/g," ").replace(/ a /g,"-").match(/^((\d\s)?[\wà-ú\s]+?)\.?\s(\d+)(?:[:.,](\d+(?:-\d+)?))?(?:,\s*(\d+))?$/);if(!x)return console.warn("Could not parse detailed reference:",o),null;const[,d,,h,m]=x,i=N(d.trim(),t);if(!i)return console.warn("Unknown book abbreviation in detailed reference:",d),null;let p="1",b="";if(m){const g=m.split("-");p=g[0],b=g[1]||""}return{book:i,chapter:h||"1",verseStart:p,verseEnd:b}},W=O.memo(({verseData:o,bookName:t,chapterNumber:l})=>{const{addBookmark:x,removeBookmark:d,isBookmarked:h}=Q(),{showToast:m}=q(),{language:i}=M(),p=h(t,l,o.verse),b=n.useCallback(()=>{p?(d(t,l,o.verse),m(r.bookmark_removed[i])):(x({book:t,chapter:l,verse:o.verse,text:o.text}),m(r.bookmark_added[i]))},[p,t,l,o,x,d,m,i]);return e.jsxs("p",{className:"verse-item",id:`verse-${o.verse}`,children:[e.jsx("button",{className:`bookmark-btn ${p?"bookmarked":""}`,onClick:b,children:e.jsx("i",{className:"material-icons",children:p?"bookmark":"bookmark_border"})}),e.jsx("sup",{className:"verse-number",children:o.verse}),e.jsx("span",{className:"verse-text",children:o.text})]})}),Z=O.memo(({bookName:o,chapterNumber:t,chapterData:l,onBack:x,totalChapters:d,onChapterChange:h,onBookChange:m,verseToHighlight:i})=>{const{language:p}=M(),b=n.useRef(null),g=n.useRef(null),T=n.useMemo(()=>X("all_canon"),[]);n.useEffect(()=>{i&&setTimeout(()=>{const c=document.getElementById(`verse-${i}`);c==null||c.scrollIntoView({behavior:"smooth",block:"center"})},100)},[i,o,t]);const B=n.useCallback(()=>{t>1&&h(t-1)},[t,h]),u=n.useCallback(()=>{t<d&&h(t+1)},[t,d,h]),C=c=>{m(c.target.value)},j=c=>{h(Number(c.target.value))},a=n.useCallback(c=>{b.current=c.targetTouches[0].clientX,g.current=c.targetTouches[0].clientY},[]),w=n.useCallback(c=>{if(b.current===null||g.current===null)return;const P=c.changedTouches[0].clientX,D=c.changedTouches[0].clientY,v=P-b.current,L=D-g.current;Math.abs(v)>Math.abs(L)&&Math.abs(v)>50&&(v>0?B():u()),b.current=null,g.current=null},[B,u]),E=N(o,p);return e.jsxs("div",{className:"card reading-view",onTouchStart:a,onTouchEnd:w,children:[e.jsx(Y,{onClick:x,text:r.back[p]}),e.jsxs("h2",{children:[o," ",t]}),e.jsx("div",{className:"verse-list",children:l.verses.map(c=>e.jsx(W,{verseData:c,bookName:o,chapterNumber:t},c.verse))}),e.jsxs("div",{className:"reading-nav",children:[e.jsxs("button",{className:"reading-nav-btn",onClick:B,disabled:t<=1,children:["                    ",e.jsx("i",{className:"material-icons",children:"chevron_left"})]}),e.jsxs("div",{className:"reading-nav-selector",children:[e.jsx("select",{value:E||"",onChange:C,children:T.map(c=>e.jsx("option",{value:c,children:V(c,p)},c))}),e.jsx("select",{value:t,onChange:j,children:Array.from({length:d},(c,P)=>P+1).map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsx("button",{className:"reading-nav-btn",onClick:u,disabled:t>=d,children:e.jsx("i",{className:"material-icons",children:"chevron_right"})})]})]})}),ee=n.lazy(()=>A(()=>import("./BibleView-DAfY_75F.js"),__vite__mapDeps([0,1,2,3]))),ae=n.lazy(()=>A(()=>import("./ApocryphaView-D52N5eXL.js"),__vite__mapDeps([4,1,2,3]))),se=n.lazy(()=>A(()=>import("./ArchaeologyView-D-Ob5X04.js"),__vite__mapDeps([5,1,3]))),ne=n.lazy(()=>A(()=>import("./ThematicView-CGoLeKKv.js"),__vite__mapDeps([6,1,3]))),ce=n.lazy(()=>A(()=>import("./HarmonyView-BW1YGM5U.js"),__vite__mapDeps([7,1,3]))),te=O.memo(({results:o,onResultClick:t})=>e.jsx("div",{className:"search-results-container",children:o.map((l,x)=>e.jsxs("div",{className:"search-result-item",onClick:()=>t(l),role:"button",tabIndex:0,children:[e.jsxs("div",{className:"search-result-ref",children:[l.book," ",l.chapter,":",l.verse]}),e.jsx("p",{className:"search-result-text",children:l.text})]},x))})),oe=()=>e.jsx("div",{className:"spinner-container",style:{minHeight:"50vh"},children:e.jsx("div",{className:"spinner"})}),re=({verseToNavigate:o,onVerseNavigated:t,initialQuery:l,onSearchHandled:x})=>{const{addPlan:d}=K(),[h,m]=n.useState("index"),[i,p]=n.useState(""),[b,g]=n.useState([]),[T,B]=n.useState(!1),[u,C]=n.useState(null),{getChapterContent:j}=U(),{language:a}=M();n.useEffect(()=>{l&&x&&(p(l),x())},[l,x]),n.useEffect(()=>{(async()=>{if(o){const{book:_,chapter:k,verse:f}=o,y=N(_,"pt")||N(_,"en")||N(_,"es");if(!y)return;const S=V(y,a),R=await j(y,k);R&&C({bookName:S,chapterNumber:k,chapterData:R,verseToHighlight:f}),t()}})()},[o,t,j,a]);const w=n.useCallback(()=>m("index"),[]),E=n.useMemo(()=>F(async s=>{const _=s.trim();if(!_){g([]),B(!1);return}B(!0);const k=J(_,a);if(k){const{book:f,chapter:y,verseStart:S}=k,R=V(f,a),H={book:R,chapter:parseInt(y,10),verse:parseInt(S,10),text:`Clique para ler ${R} ${y}:${S}`};g([H])}else g([]);B(!1)},500),[a]);n.useEffect(()=>{E(i)},[i,E]);const c=n.useCallback(async s=>{const _=N(s.book,a);if(!_)return;const k=await j(_,s.chapter);k&&C({bookName:s.book,chapterNumber:s.chapter,chapterData:k,verseToHighlight:s.verse})},[j,a]),P=n.useCallback(async s=>{if(!u)return;const{bookName:_}=u,k=N(_,a);if(!k)return;const f=await j(k,s);f&&(C({bookName:_,chapterNumber:s,chapterData:f}),window.scrollTo(0,0))},[u,j,a]),D=n.useCallback(async s=>{if(!u)return;const _=$(s),k=Math.min(u.chapterNumber,_),f=V(s,a),y=await j(s,k);y&&(C({bookName:f,chapterNumber:k,chapterData:y}),window.scrollTo(0,0))},[u,a,j]),v=n.useCallback(s=>{s&&d(s)},[d]),L=n.useMemo(()=>[{id:"bible",icon:"book",title:r.dir_read_bible[a],description:r.bible_description[a],action:()=>m("bible"),addPlanAction:()=>v(G(a).find(s=>s.id==="anual_tradicional"))},{id:"gospelHarmony",icon:"compare_arrows",title:r.dir_gospel_harmony[a],description:r.harmony_description[a],action:()=>m("gospelHarmony"),addPlanAction:()=>v(I.gospelHarmony)},{id:"themes",icon:"local_offer",title:r.dir_thematic[a],description:r.thematic_description[a],action:()=>m("themes"),addPlanAction:()=>v(I.themes)},{id:"apocrypha",icon:"history_edu",title:r.dir_apocrypha[a],description:r.apocrypha_description[a],action:()=>m("apocrypha"),addPlanAction:()=>v(I.apocrypha)},{id:"archaeology",icon:"public",title:r.dir_archaeology[a],description:r.archaeology_description[a],action:()=>m("archaeology"),addPlanAction:()=>v(I.archaeology)}],[a,v]);if(u){const s=N(u.bookName,a)||"";return e.jsx(Z,{bookName:u.bookName,chapterNumber:u.chapterNumber,chapterData:u.chapterData,onBack:()=>C(null),totalChapters:$(s),onChapterChange:P,onBookChange:D,verseToHighlight:u.verseToHighlight})}const z=()=>e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:r.bible_directory_title[a]}),e.jsx("p",{children:r.bible_directory_desc[a]}),e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("i",{className:"material-icons",children:"search"}),e.jsx("input",{type:"text",className:"search-input",placeholder:r.bible_search_placeholder[a],value:i,onChange:s=>p(s.target.value),"aria-label":r.bible_search_placeholder[a]})]})}),T&&e.jsxs("div",{className:"search-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:r.search_loading[a]})]}),!T&&i&&b.length>0&&e.jsx(te,{results:b,onResultClick:c}),!T&&i&&b.length===0&&e.jsx("div",{className:"search-empty",children:e.jsxs("p",{children:[r.search_no_results[a],' "',i,'".']})}),!i&&e.jsx("div",{className:"directory-card-grid",children:L.map(s=>e.jsxs("div",{className:"directory-card",children:[e.jsxs("div",{className:"directory-card__header",children:[e.jsx("i",{className:"material-icons directory-card__icon",children:s.icon}),e.jsx("h3",{className:"directory-card__title",children:s.title})]}),e.jsx("p",{className:"directory-card__description",children:s.description}),e.jsxs("div",{className:"directory-card__actions",children:[e.jsxs("button",{className:"directory-card__action-primary",onClick:s.action,children:[e.jsx("i",{className:"material-icons",children:"arrow_forward"}),e.jsx("span",{children:r.explore[a]})]}),e.jsxs("button",{className:"directory-card__action-secondary",onClick:s.addPlanAction,children:[e.jsx("i",{className:"material-icons",children:"add"}),e.jsx("span",{children:r.add_study_plan[a]})]})]})]},s.id))})]});return e.jsxs(n.Suspense,{fallback:e.jsx(oe,{}),children:[h==="index"&&z(),h==="bible"&&e.jsx(ee,{onBack:w,onAddPlan:d}),h==="apocrypha"&&e.jsx(ae,{onBack:w,onAddPlan:d}),h==="archaeology"&&e.jsx(se,{onBack:w,onAddPlan:d}),h==="themes"&&e.jsx(ne,{onBack:w,onAddPlan:d}),h==="gospelHarmony"&&e.jsx(ce,{onBack:w})]})},de=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{de as B,Z as R,J as p};
