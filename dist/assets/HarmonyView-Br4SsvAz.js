import{r as u,h as C,e as f,u as N,n as p,t as h,a as x,j as a,k as v,B as y,R as k}from"./index-D_bUWnp8.js";import{c as B}from"./readingPlans-C_XEDzjy.js";import{R as w}from"./BibleDirectory-B6ygp-bj.js";const R=k.memo(({gospel:s,passage:e,onPassageClick:r})=>{const{language:t}=N(),l=p(s,t),n=u.useCallback(()=>{e&&r(s,e)},[s,e,r]);return a.jsxs("div",{className:`passage-card gospel-${s}`,children:[a.jsx("div",{className:"passage-card__header",children:l}),a.jsx("div",{className:"passage-card__body",children:e?a.jsx("button",{className:"passage-card__link",onClick:n,children:e}):a.jsx("span",{className:"passage-card__empty",children:"-"})})]})}),D=k.memo(({item:s,onPassageClick:e})=>{const{language:r}=N();return a.jsxs("section",{className:"harmony-event",children:[a.jsx("h3",{className:"harmony-event__title",children:s.evento}),a.jsx("div",{className:"harmony-event__passages",children:Object.entries(s.passagens).map(([t,l])=>a.jsx(R,{gospel:t,passage:l,onPassageClick:e},t))}),s.observacoes&&a.jsxs("div",{className:"harmony-event__notes",children:[a.jsxs("strong",{children:[h.harmony_notes[r],":"]})," ",s.observacoes]})]})}),S=({onBack:s})=>{const[e,r]=u.useState(null),{getChapterContent:t}=C(),{showToast:l}=f(),{language:n}=N(),j=u.useCallback(async(o,c)=>{if(!c)return;const i=p(o,"en"),m=p(o,n);if(!i)return;const _=c.replace(/\s*\(.*\)\s*/,"").trim().split(/[:\-]/)[0],d=parseInt(_,10);if(isNaN(d)){console.error("Could not parse chapter from passage:",c);return}const g=await t(i,d);if(!g){l(h.content_not_found_toast[n].replace("{book}",m).replace("{chapter}",String(d)));return}r({bookName:m,chapterNumber:d,chapterData:g})},[t,n,l]),b=u.useCallback(async o=>{if(!e)return;const{bookName:c}=e,i=x(c,n);if(!i)return;const m=await t(i,o);m&&(r({bookName:c,chapterNumber:o,chapterData:m}),window.scrollTo(0,0))},[e,t,n]);if(e){const o=x(e.bookName,n)||"";return a.jsx(w,{bookName:e.bookName,chapterNumber:e.chapterNumber,chapterData:e.chapterData,onBack:()=>r(null),totalChapters:v(o),onChapterChange:b})}return a.jsxs("div",{className:"card",children:[a.jsx(y,{onClick:s,text:h.back[n]}),a.jsx("h2",{children:h.harmony_title[n]}),a.jsx("p",{children:h.harmony_description[n]}),a.jsx("div",{className:"harmony-list",children:B.map((o,c)=>a.jsx(D,{item:o,onPassageClick:j},c))})]})};export{S as default};
