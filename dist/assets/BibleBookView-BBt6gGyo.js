import{R as b,j as e,u as B,a as j,k as f,r as i,t as r,B as S,e as R,h as D}from"./index-D_bUWnp8.js";import{R as V}from"./BibleDirectory-B6ygp-bj.js";const E=b.memo(({book:t,onBookClick:o,onAddPlan:p})=>{const{language:n}=B(),c=j(t,n),a=c?f(c):0,u=i.useCallback(k=>{if(k.stopPropagation(),!c)return;const l=r.reading_plan_for_book_title[n].replace("{book}",t),h=r.reading_plan_for_book_desc[n].replace("{book}",t),d={id:`book_${c.replace(/\s/g,"_")}`,title:l,description:h};p(d)},[t,p,n,c]);return e.jsxs("div",{className:"book-card",children:[e.jsxs("button",{className:"book-card-content-btn",onClick:()=>o(t),children:[e.jsx("span",{className:"book-card-name",children:t}),a>0&&e.jsxs("span",{className:"book-card-chapters",children:[a," ",r.chapter[n],a>1?"s":""]})]}),e.jsx("button",{className:"book-card-add-btn",onClick:u,"aria-label":r.add_plan_for_aria[n].replace("{title}",t),children:e.jsx("i",{className:"material-icons",children:"add"})})]})}),$=b.memo(({books:t,onBookClick:o,onAddPlan:p})=>e.jsx("div",{className:"book-grid",children:t.map(n=>e.jsx(E,{book:n,onBookClick:o,onAddPlan:p},n))})),A=b.memo(({chapterNum:t,onChapterSelect:o})=>e.jsx("button",{id:`chapter-btn-${t}`,className:"chapter-item",onClick:()=>o(t),children:t})),J=b.memo(({bookName:t,totalChapters:o,onChapterSelect:p,onBack:n})=>{const{language:c}=B(),[a,u]=i.useState(""),k=i.useCallback(l=>{l.preventDefault();const h=parseInt(a,10);if(h>=1&&h<=o){const d=document.getElementById(`chapter-btn-${h}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.classList.add("highlighted"),setTimeout(()=>{d.classList.remove("highlighted")},1500))}u("")},[a,o]);return e.jsxs("div",{className:"card",children:[e.jsx(S,{onClick:n,text:r.back_to_books[c]}),e.jsx("h2",{children:t}),e.jsx("p",{children:r.select_chapter_prompt[c]}),o>30&&e.jsxs("form",{onSubmit:k,className:"chapter-jump-form",children:[e.jsx("input",{type:"number",value:a,onChange:l=>u(l.target.value),placeholder:r.chapter_jump_placeholder[c],min:"1",max:o,"aria-label":r.chapter_jump_placeholder[c]}),e.jsx("button",{type:"submit",children:r.chapter_jump_button[c]})]}),e.jsx("div",{className:"chapter-grid",children:Array.from({length:o},(l,h)=>h+1).map(l=>e.jsx(A,{chapterNum:l,onChapterSelect:p},l))})]})}),P=b.memo(({title:t,description:o,bookSections:p,onBack:n,onAddPlan:c})=>{const[a,u]=i.useState(null),[k,l]=i.useState(null),[h,d]=i.useState(null),[w,C]=i.useState(!1),{showToast:g}=R(),{language:m}=B(),{getChapterContent:v}=D(),T=i.useCallback(s=>{u(s)},[]),_=i.useCallback(async s=>{if(!a)return;C(!0),d(null);const x=j(a,m);if(!x){g(r.content_not_available_toast[m].replace("{bookName}",a)),C(!1);return}const N=await v(x,s);N&&N.verses.length>0?(l(s),d(N)):g(r.content_not_found_toast[m].replace("{book}",a).replace("{chapter}",String(s))),C(!1)},[v,m,g,a]),y=i.useCallback(s=>{_(s),window.scrollTo(0,0)},[_]),I=i.useCallback(()=>{l(null),d(null)},[]),L=i.useCallback(()=>{u(null),l(null),d(null)},[]);if(w)return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"spinner-container",children:e.jsx("div",{className:"spinner"})}),e.jsx("p",{style:{textAlign:"center"},children:r.loading_book_content[m]})]});if(a&&k&&h){const s=j(a,m)||"";return e.jsx(V,{bookName:a,chapterNumber:k,chapterData:h,onBack:I,totalChapters:f(s),onChapterChange:y})}if(a){const s=j(a,m)||"",x=f(s);return e.jsx(J,{bookName:a,totalChapters:x,onChapterSelect:_,onBack:L})}return e.jsxs("div",{className:"card",children:[n&&e.jsx(S,{onClick:n,text:r.back[m]}),e.jsx("h2",{children:t}),e.jsx("p",{children:o}),p.map(s=>e.jsxs("div",{className:s.className||"",children:[e.jsx("h3",{className:"book-section-title",children:s.title}),e.jsx($,{books:s.books,onBookClick:T,onAddPlan:c})]},s.title))]})});export{P as B};
